#!/usr/bin/env bash

# ══ Настройки ══
USER_START=2    # с какого номера начинать
USER_END=1002     # по какой номер включительно
API_URL="http://localhost:3000/api/v2/admin/users"
AUTH_USER="cliquebenito"
AUTH_PASS="cliquebenito"
VISIBILITY="public"   # или limited, private
RESTRICTED=false      # true или false

for (( i=USER_START; i<=USER_END; i++ )); do
  user_key="userkey${i}"
  name="user${i}"
  email="${name}@example.com"
  full_name="User ${i}"

  echo "Создаём пользователя ${user_key} (${email})..."

  curl --silent --show-error --location --request POST "${API_URL}" \
    --user "${AUTH_USER}:${AUTH_PASS}" \
    --header "Content-Type: application/json" \
    --data-raw "{
      \"user_key\":   \"${user_key}\",
      \"name\":       \"${name}\",
      \"email\":      \"${email}\",
      \"full_name\":  \"${full_name}\",
      \"visibility\": \"${VISIBILITY}\",
      \"restricted\": ${RESTRICTED}
    }" \
  && echo "   → OK" || echo "   → FAIL"

  echo
done
